/*
 simplerWeather v1.0.0
Author: Brooke.
URL: https://github.com/BrookeDot/SimplerWeather
License: MIT
Based on SimpleWeather -- https://github.com/monkeecreate/jquery.simpleWeather

Simple Weather Java Switches to DarkSky */
"use strict";!function(t){function e(t,e){return"f"===t?Math.round(5/9*(e-32)):Math.round(1.8*e+32)}t.extend({simplerWeather:function(r){if("c"===(r=t.extend({location:"",units:"f",authmethod:"apikey",apikey:"",proxyurl:"",forecast:"true",forecastdays:"4",success:function(t){},error:function(t){}},r)).units.toLowerCase())var i="si";else i="us";return t.ajax({url:encodeURI(function(t){if(/^\-?\d+(\.\d+)?,\s*\-?\d+(\.\d+)$/.test(r.location))var e=r.location.split(","),a=e[0],n=e[1];else r.error("Could not retrieve weather due to an invalid location. Must enter location as latitude,longitude");return"apikey"===t&&""!==r.apikey?"https://api.darksky.net/forecast/"+encodeURIComponent(r.apikey)+"/"+a+","+n+"/?units="+i+"&exclude=minutely,hourly,alerts,flags":"proxy"===t&&""!==r.proxyurl?encodeURI(r.proxyurl+"?lat="+a+"&lon="+n+"&units="+i):void r.error("Could not retrieve weather due to an invalid api key or proxy setting.")}(r.authmethod)),dataType:"jsonp",success:function(t){if(null!==t){var i=t,a={};if(a.temp=Math.floor(i.currently.temperature)+"Â°",a.currently=i.currently.summary,a.icon=i.currently.icon,a.pressure=i.currently.pressure,a.humidity=i.currently.humidity,a.visibility=i.currently.visibility,a.updated=i.currently.time,a.high=i.daily.data[0].temperatureHigh,a.low=i.daily.data[0].temperatureLow,a.sunrise=i.daily.data[0].sunriseTime,a.sunset=i.daily.data[0].sunsetTime,a.description=i.daily.data[0].summary,a.attributionlink="https://darksky.net/",a.unit=r.units.toLowerCase(),"f"===a.unit?a.altunit="c":a.altunit="f",a.alt={temp:e(r.units,a.temp),high:e(r.unit,a.high),low:e(r.unit,a.low)},r.forcast&&"NaN"!==parseInt(r.forecastdays)){a.forecast=[];for(var n=0;n<r.forecastdays;n++){var u=i.daily.data[n];u.date=u.time,u.summary=u.summary,u.high=u.temperatureHigh,u.low=u.temperatureLow,u.icon=u.icon,u.alt={high:e(r.units,u.temperatureHigh),low:e(r.units,u.temperatureLow)},a.forecast.push(u)}}r.success(a)}else r.error("There was a problem retrieving the latest weather information.")}}),this}})}(jQuery);
